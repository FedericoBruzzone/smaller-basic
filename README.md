[![License: GPL v3](https://img.shields.io/badge/License-GPL%20v3-blue.svg)](http://www.gnu.org/licenses/gpl-3.0)
[![License: CC BY-SA 4.0](https://img.shields.io/badge/License-CC%20BY--SA%204.0-blue.svg)](http://creativecommons.org/licenses/by-sa/4.0/)

# Smaller Basic

A Python interpreter using ANTLR4 as a parser generator for a version of Microsoft's Small Basic language renamed "Smaller Basic."

## An example of source code

Location of this source code: `source_code/source.sb`.

```python
Sub x_as_int
    If (x = "1") Then x = 1 EndIf
    If (x = "2") Then x = 2 EndIf
    If (x = "3") Then x = 3 EndIf
    If (x = "4") Then x = 4 EndIf
    If (x = "5") Then x = 5 EndIf
    If (x = "6") Then x = 6 EndIf
    If (x = "7") Then x = 7 EndIf
    If (x = "8") Then x = 8 EndIf
    If (x = "9") Then x = 9 EndIf
EndSub

Sub main
    While (true)
        IO.WriteLine("Enter a number from 0 to 9: ")
        x = IO.ReadLine()
        x_as_int()

        IO.WriteLine("Enter your name: ")
        name = IO.ReadLine()

        For i = 0 To x Step 2
            IO.WriteLine("Hello " + name)
        EndFor
    EndWhile
EndSub

main()
```

The output of this source code is:

```bash
+---------------------------------------+
| ----- Run source_code/source.sb ----- |
+---------------------------------------+

Enter a number from 0 to 9:
|> 8
Enter your name:
|> Federico
Hello Federico
Hello Federico
Hello Federico
Hello Federico
```
Parsing errors and warnings are displayed as follows:

![warning_error](https://github.com/FedericoBruzzone/smaller-basic/blob/main/img_readme/warning_error.png)

## Project directory structure

```
.
├── source_code
│   ├── ...
└── src
    ├── abstract_syntax_tree
    │   ├── ...
    ├── error
    │   ├── ...
    ├── grammar
    │   ├── SmallerBasic.g4
    │   └── ...
    ├── interpreter
    │   ├── dispatch_table.py
    │   ├── global_memory.py
    │   ├── interpreter.py
    │   └── library
    │       └── ...
    ├── main.py
    └── utils
        └── ...
```

### Overview

- `source_code`: This directory likely contains the source code files of your SmallerBasic programming language.

- `src`: The main source code directory containing various subdirectories and files related to the interpreter and language implementation.

    - `abstract_syntax_tree`: This directory could hold files related to constructing and manipulating the abstract syntax tree of programs written in SmallerBasic.

    - `error`: Here, you might find files related to error handling and reporting within the interpreter.

    - `grammar`: This directory could contain the grammar definition files, such as `SmallerBasic.g4`, which define the syntax and structure of the SmallerBasic language using ANTLR grammar notation.

    - `interpreter`: This is a crucial directory containing the implementation of the interpreter for the SmallerBasic language.

        - `dispatch_table.py`: This file might contain the implementation of a dispatch table used for efficiently executing different language constructs.

        - `global_memory.py`: Here, you could have code related to managing the global memory and variables within the interpreter.

        - `interpreter.py`: This could be the main interpreter implementation that executes SmallerBasic programs by traversing the abstract syntax tree and performing actions based on the language constructs.

        - `library`: If present, this directory might contain additional library files that provide built-in functions or utilities for SmallerBasic programs.

- `main.py`: This is likely the entry point of your interpreter, where execution starts when running the interpreter.

- `utils`: This directory could hold utility files that are used throughout the project.

## Starting point working locally

**Create and start a new virtual environment**

`source create_venv.sh venv`

**Start current virtual environment**

`source venv/bin/activate`

**Deactivate the current virtual environment**

`deactivate`

## Usage

```
Usage: smallbasic [OPTION] [FILE]
Run Smaller Basic program

Options:
  -h      display this help and exit
  -g      generate grammar
  -gas    generate grammar and run all files in source_code
  -as     run all files in source_code
```

## Interpreter

### Run a file

`smallbasic <file>.sb`

For example, you can ri-generate the grammar and run a file in `source_code` directory in the following way:

`smallbasic -g source_code/source.sb`

### Generate grammar

`antlr4 -Dlanguage=Python3 -visitor src/grammar/SmallerBasic.g4`

- **Requirements**: the same or greater java version used to compile the antlr4 jar. (in my case **java-18-openjdk-amd64**)

- Change version of java: `update-alternatives --config java`.

- `antlr4` is an alias generated by the `create_venv.sh` file.

### Run main

`python3 -m src.main source_code/<file>.sb`

